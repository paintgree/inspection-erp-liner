{% extends "base.html" %}
{% block content %}
<h1>New Inspection Entry</h1>
<a class="btn" href="/runs/{{ run.id }}">Back</a>

<form method="post" action="/runs/{{ run.id }}/entries/new" class="card">

  <div class="grid2">
    <div>
      <label>Inspection Date</label>
      <input name="actual_date" type="date" value="{{ today }}" required />
    </div>
    <div>
      <label>Inspection Time (HH:MM)</label>
      <input name="actual_time" placeholder="14:05" required />
    </div>
  </div>

  <div class="grid2">
    <div>
      <label>Pipe Length (m)</label>
      <input name="pipe_length_m" placeholder="Example: 120" />
      <div class="muted">This drives dashboard progress (max length entered).</div>
    </div>
    <div>
      <label>QC Inspector (auto)</label>
      <input value="{{ user.name }}" disabled />
    </div>
  </div>

  {% if run.process == "REINFORCEMENT" %}
    <div class="grid2">
      <div><label>Operator (Annular 1 & 2)</label><input name="operator_annular12" /></div>
      <div><label>Operator (Int./ Ext. 3 & 4)</label><input name="operator_intext34" /></div>
    </div>
  {% else %}
    <div class="grid2">
      <div><label>Operator 1</label><input name="operator1" /></div>
      <div><label>Operator 2</label><input name="operator2" /></div>
    </div>
  {% endif %}

  <div class="card inner">
    <h2>Inspection Readings</h2>
    <div class="muted">Enter numeric values. Leave blank if not taken.</div>

    <div class="grid2">
      {% for p in params %}
        {% if p.param_key != "length_m" %}
        <div>
          <label>{{ p.label }} {% if p.unit %} ({{ p.unit }}) {% endif %}</label>
          <input name="val_{{ p.param_key }}" placeholder="numeric" />
        </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <label>Remark</label>
  <input name="remark" />

  <button class="btn primary" type="submit">Submit</button>
</form>
{% endblock %}
